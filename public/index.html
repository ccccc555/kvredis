<!DOCTYPE html>
<html>
<body>
  <canvas id="canvas"></canvas>
  <script>
    const c1 = document.getElementById('canvas');
    const ct1 = c1.getContext('2d');

    // Set canvas dimensions
    c1.width = 700;
    c1.height = 900;
var name=prompt("Enter name")
var xp,yp
 
function posi(){
  ct1.clearRect(0,200,600,400)
    navigator.geolocation.getCurrentPosition((position) => {
   yp=position.coords.latitude
   xp=position.coords.longitude
      ct1.fillText(name, 360+3*xp,300-3*yp)
      ct1.fillText(xp+"/"+yp,200,40)       
});
}
    
function ky(){
 const option = { method: 'GET', }  
 fetch("/getkeys",option )
     .then(response => response.json())
     .then(response => {
        alert('keys length='+response.le)
               alert('keys='+response.ks) 
                         } )
      .catch(err => {alert('keys err='+err)}); 
                        
}
function sv(){
  const option= {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify( {nme: name, xpos: xp}), 
  }
  
  
fetch("/setname",option )
    .then(response => response.json() )
    .then(response => {alert("saved="+response.done)} )
    .catch(err = {alert("set err="+err) } )
              
}
       
function my(){
 const option = { method: 'GET', }  
 fetch("/getnum",option )
     .then(response => response.json())
     .then(response => {
               ct1.fillText(response.nmber+' '+response.ac,10,100)   
                         } )
      .catch(err => {alert('number err='+err)}); 
                        
}
           
ct1.font="50px Arial"
ct1.fillText("Test3 key",0,90)
    setTimeout(ky,2000)
setTimeout(sv,4000)    
 
    
    
  

    setInterval(posi,100)
  
  
    </script>
  </body>
 </html>







